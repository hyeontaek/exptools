#!/usr/bin/env python

import asyncio
import sys

from exptools.run_client import run_client

loop = asyncio.get_event_loop()
argv = sys.argv[1:]

task = asyncio.ensure_future(run_client(argv, loop=loop), loop=loop)

ret = 1
try:
  ret = loop.run_until_complete(task)
finally:
  if not task.done():
    task.cancel()
    ret = loop.run_until_complete(task)

sys.exit(ret)
